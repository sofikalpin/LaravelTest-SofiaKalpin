# Event Broadcasting and Real-time Updates

## Backend (Laravel PHP)

### 1. Task Controller
```php
namespace App\Http\Controllers;

use App\Models\Task;
use App\Events\TaskUpdated;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Broadcast;
use Illuminate\Routing\Controller;

class TaskController extends Controller
{
    public function update(Request $request, Task $task)
    {
        $task->update($request->all());
        broadcast(new TaskUpdated($task))->toOthers();
        return response()->json(['success' => true, 'task' => $task]);
    }
}
```

### 2. TaskUpdated Event
```php
namespace App\Events;

use Illuminate\Broadcasting\Channel;
use Illuminate\Broadcasting\InteractsWithSockets;
use Illuminate\Broadcasting\ShouldBroadcast;
use Illuminate\Foundation\Events\Dispatchable;
use Illuminate\Queue\SerializesModels;
use App\Models\Task;

class TaskUpdated implements ShouldBroadcast
{
    use Dispatchable, InteractsWithSockets, SerializesModels;

    public $task;

    public function __construct(Task $task)
    {
        $this->task = $task;
    }

    public function broadcastOn()
    {
        return new Channel('tasks');
    }

    public function broadcastAs()
    {
        return 'task.updated';
    }
}
```

### 3. Broadcasting Channel
```php
Broadcast::channel('tasks', function ($user) {
    return Auth::check();
});
```

### 4. .env Configuration
```ini
BROADCAST_DRIVER=pusher
PUSHER_APP_ID=your_app_id
PUSHER_APP_KEY=your_app_key
PUSHER_APP_SECRET=your_app_secret
PUSHER_APP_CLUSTER=mt1
```

## Frontend (JavaScript)

```javascript
import Echo from 'laravel-echo';
import Pusher from 'pusher-js';

window.Pusher = Pusher;

window.Echo = new Echo({
    broadcaster: 'pusher',
    key: 'your_app_key',
    cluster: 'mt1',
    encrypted: true,
});

window.Echo.channel('tasks')
    .listen('.task.updated', (event) => {
        console.log('Task updated:', event.task);
    });
```